(function(){"use strict";function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype,i=this,s=i.EventEmitter;r.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},r.addListener=function(e,n){var r,i=this.getListenersAsObject(e),s="object"==typeof n;for(r in i)i.hasOwnProperty(r)&&-1===t(i[r],n)&&i[r].push(s?n:{listener:n,once:!1});return this},r.on=n("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=n("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,n){var r,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&(r=t(s[i],n),-1!==r&&s[i].splice(r,1));return this},r.off=n("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},r.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},r.removeAllListeners=n("removeEvent"),r.emitEvent=function(e,t){var n,r,i,s,o,u=this.getListenersAsObject(e);for(s in u)if(u.hasOwnProperty(s))for(n=u[s].slice(0),i=n.length;i--;)r=n[i],r.once===!0&&this.removeListener(e,r.listener),o=r.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},r.trigger=n("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return i.EventEmitter=s,e},"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:i.EventEmitter=e}).call(this);
!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter"],function(o,s){return e(t,s)}):"object"==typeof exports?module.exports=e(t,require("eventEmitter/EventEmitter")):t.Simodal=e(t,t.EventEmitter)}(window,function(t,e){"use strict";function o(t,e){for(var o in e)t[o]=e[o];return t}function s(e,o,s,i){try{i=new(t.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0"),i.open(s?"POST":"GET",e,1),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){i.readyState>3&&o&&o(i.responseText,i)},i.send(s)}catch(n){t.console&&console.log(n)}}function i(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function n(t,e){t.classList?t.classList.add(e):i(t,e)||(t.className+=" "+e)}function a(t,e){if(t.classList)t.classList.remove(e);else if(i(t,e)){var o=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(o," ")}}function l(){var t=d.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",d.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var o=d.createElement("div");o.style.width="100%",t.appendChild(o);var s=o.offsetWidth;return t.parentNode.removeChild(t),e-s}function r(t){this.options=o({},this.constructor.defaults),this.option(t),this._create()}var d=t.document,c="object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1==t.nodeType&&"string"==typeof t.nodeName};return r.overlays={},o(r.prototype,e.prototype),r.defaults={url:!1,content:!1,show:!0,keyboard:!0,modalClass:"simodal",overlayClass:"simodal-overlay",closersClass:"simodal-close",submitClass:"simodal-submit",cancelClass:"simodal-cancel",modalOnShowClass:"",modalOnHideClass:"",overlayOnShowClass:"open",overlayOnHideClass:"",overlayClick:!0,removeOnHide:!1,closeOnClick:!1,kind:"modal"},r.prototype.option=function(t){o(this.options,t)},r.prototype._insertHTML=function(t,e){c(e)?t.appendChild(e):t.innerHTML=e},r.prototype._create=function(){if(this.overlay=this._getOverlay(),this.modal=this._getModalWindow(),this.overlay.appendChild(this.modal),this.options.url){var t=this;this.options.content&&(this._insertHTML(this.modal,this.options.content),this._onInit()),s(this.options.url,function(e){t.modal.innerHTML=e,t.options.content||t._onInit(),t.emit("ajaxLoaded")})}else this.options.content&&(this._insertHTML(this.modal,this.options.content),this._onInit())},r.prototype._getOverlay=function(){if("notification"==this.options.kind&&r.overlays[this.options.overlayClass])return r.overlays[this.options.overlayClass];var t=d.createElement("div");return this.addClass(t,this.options.overlayClass),t.tabIndex="-1","notification"==this.options.kind&&(r.overlays[this.options.overlayClass]=t),d.body.appendChild(t),t},r.prototype._getModalWindow=function(){var t=d.createElement("div");return this.addClass(t,this.options.modalClass),t},r.prototype.addClass=function(t,e){for(var o=e.trim().split(" "),s=0,i=o.length;i>s;s++)n(t,o[s])},r.prototype._onInit=function(){this._initEventListeners(),this.options.show&&this.show()},r.prototype._initEventListeners=function(){for(var t=this.modal.getElementsByClassName(this.options.closersClass),e=this,o=0,s=t.length;s>o;o++)t[o].addEventListener("click",function(t){t.preventDefault(),e.hide()});this.options.closeOnClick&&this.modal.addEventListener("click",function(t){t.preventDefault(),e.hide()});var i=this.overlay.getElementsByClassName(this.options.submitClass);for(o=0,s=i.length;s>o;o++)i[o].addEventListener("click",function(t){t.preventDefault(),e.onSubmit(this)});var n=this.overlay.getElementsByClassName(this.options.cancelClass);for(o=0,s=i.length;s>o;o++)n[o].addEventListener("click",function(t){t.preventDefault(),e.onCancel(this)});"modal"==this.options.kind&&(this.options.keyboard&&this.overlay.addEventListener("keydown",function(t){27==t.which&&e.hide()}),this.options.overlayClick&&(this.overlay.addEventListener("click",function(t){e.hide()}),this.modal.addEventListener("click",function(t){t.stopPropagation(),t.stopImmediatePropagation()})))},r.prototype.show=function(){if("modal"==this.options.kind){var t=l();d.body.style.overflow="hidden",d.body.style["padding-right"]=t+"px"}n(this.overlay,this.options.overlayOnShowClass),this.options.modalOnShowClass&&this.addClass(this.modal,this.options.modalOnShowClass),this.options.keyboard&&this.overlay.focus(),this.emit("show")},r.prototype.hide=function(){function t(){if("modal"==e.options.kind)d.body.style.overflow="auto",d.body.style["padding-right"]="0",e.options.removeOnHide?e.overlay.remove():a(e.overlay,e.options.overlayOnShowClass);else if("notification"==e.options.kind){e.modal.remove();var t=e.overlay.getElementsByClassName(e.options.modalClass);t.length||(e.overlay.remove(),r.overlays[e.options.overlayClass]=null)}e.emit("hide")}var e=this;this.options.modalOnHideClass?this.addClass(this.modal,this.options.modalOnHideClass):t()},r.prototype.onSubmit=function(t){this.emit("submit",t)},r.prototype.onCancel=function(t){this.emit("cancel",t)},r});